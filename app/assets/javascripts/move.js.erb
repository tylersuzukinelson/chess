$(document).ready(function() {

  var origin, destination, validMove, current_game_piece;
  //var countMoves = 0;

  $('.draggable').draggable({
      snap: true, 

      start: function(event, ui){
        current_game_piece = $(this).data('game-piece');
        origin = current_game_piece.board_square;
        console.log("origin: " + origin);
      }
  });

  $('.droppable').droppable({
    accept: ".draggable",
    hoverClass: "highlight", // highlight the squares where piece can be dropped

    drop: function(event, ui){
      destination = $(this).data('board-square'); // obtain the destination square

      current_game_piece.board_square = destination; // change origin of game piece to destination board square id
      console.log("destination: " + current_game_piece.board_square);

      //set moved flag for pawn
      if ( current_game_piece.name.indexOf("pawn") > -1 ){
        console.log('pawn moved');
        current_game_piece.moved == true;
        console.log(current_game_piece.moved);  // not move flag is not setting?
      }
      <%# if @coord.game_piece.name.include? "pawn" %>
      <%# end %>
    }
  });

  $('.grid').on('click', function(e) {
    e.preventDefault();  

  });

});